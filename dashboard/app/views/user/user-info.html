<div>
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Credenziali Utente:
                <div class="entityname">{{ctrl.user.name + " " + ctrl.user.surname}}</div>
            </h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-primary">
                <div class="panel-heading">Informazioni Utente</div>
                <div class="panel-body">
                    <form name="formEditUser">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group"
                                     ng-class="{'has-error': formEditUser.username.$invalid && formEditUser.username.$touched}">
                                    <label>Username</label>
                                    <input name="username" class="form-control" placeholder="Inserisci un username"
                                           ng-disabled="true" ng-model="ctrl.user.username" required>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group"
                                     ng-class="{'has-error': formEditUser.password.$invalid && formEditUser.password.$touched}">
                                    <label>Password</label>
                                    <input name="password" type="password" class="form-control"
                                           placeholder="Inserisci una Password" ng-disabled="ctrl.value"
                                           ng-model="ctrl.user.password" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group"
                                     ng-class="{'has-error': formEditUser.name.$invalid && formEditUser.name.$touched}">
                                    <label>Nome</label>
                                    <input name="name" class="form-control" placeholder="Inserisci nome"
                                           ng-disabled="ctrl.value" ng-model="ctrl.user.name" required>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group"
                                     ng-class="{'has-error': formEditUser.surname.$invalid && formEditUser.surname.$touched}">
                                    <label>Cognome</label>
                                    <input name="surname" class="form-control" placeholder="Inserisci cognome"
                                           ng-disabled="ctrl.value" ng-model="ctrl.user.surname" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group"
                                     ng-class="{'has-error': formEditUser.email.$touched && formEditUser.email.$invalid}">
                                    <label>E-Mail</label>
                                    <input type="email" name="email" class="form-control"
                                           placeholder="Inserisci un'email valida" ng-disabled="ctrl.value"
                                           ng-model="ctrl.user.email"
                                           ng-pattern="/^[\w-]+(\.[\w-]+)*@([a-z0-9-]+(\.[a-z0-9-]+)*?\.[a-z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$/"
                                           required>
                                    <p><label ng-show="formEditUser.email.$touched && formEditUser.email.$invalid"
                                              style="color: #A94442">Inserire una mail valida.</label></p>

                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group">
                                    <label>Ruolo</label>
                                    <ui-select ng-model="ctrl.user.userType.type" ng-disabled="true">
                                        <ui-select-match allow-clear="false"> {{ctrl.user.userType.type}}
                                        </ui-select-match>
                                        <ui-select-choices repeat='r in ctrl.userTypes | filter: $selected.search'>
                                            <span>{{r.label}}</span>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                            </div>
                        </div>
                    </form>

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="form-group">
                                <button class="btn btn-success" ng-click="ctrl.changeState()">{{ ctrl.value ? "Abilita Modifica" : "Disabilita Modifica"}}
                                </button>
                                <button class="btn btn-warning"
                                        ng-disabled="!(!formEditUser.$invalid)"
                                        ng-click="ctrl.updateUser()">Aggiorna Utente
                                </button>
                                <button class="btn btn-danger" ng-click="ctrl.resetFields()">Reset</button>
                            </div>
                        </div>
                    </div>
                    <div ng-if="isDebug"> {{ctrl.user}}</div>
                    <div ng-if="isDebug"> {{ctrl.userGroups}}</div>
                </div>
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-primary">
                <div class="panel-heading">Gruppi Associati e Ruoli Ereditati</div>
                <div class="panel-body">
                    <div ng-show="ctrl.userGroups.length==0">Nessun gruppo associato</div>
                    <div class="table-responsive" ng-repeat="g in ctrl.userGroups">
                        <h5>{{g.name}}</h5>
                        <!--<table  datatable="ng" class="table table-striped table-bordered">-->
                        <!--<thead>-->
                        <!--<tr>-->
                        <!--<th>ID</th>-->
                        <!--<th>Authority</th>-->
                        <!--</tr>-->
                        <!--</thead>-->

                        <!--<tbody>-->
                        <!--<tr ng-repeat="s in g.sids">-->
                        <!--<td>{{s.id}}</td>-->
                        <!--<td>{{s.authorityName}}</td>-->
                        <!--</tr>-->
                        <!--</tbody>-->
                        <!--</table>-->
                    </div>
                </div>
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>

</div>